<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/template/templatebs.xhtml">


	<ui:define name="body">
		
		<h:form id="form1" prependId="false">
		
			<p:messages id="messages" showDetail="true" showSummary="false"	autoUpdate="true" />
			
	 		<p:outputPanel id="painelPesquisa" style="margin: auto; padding-top: 10px;">
	 			<p:panel header="Cadastro de Aluno" styleClass="box-info">
		   				<div class="row">	
							<div class="col-md-12 has-error">	
								<label class="control-label" for="nome">Nome *</label>
								<p:inputText id="nome" value="#{alunoVisao.aluno.alunNome}" maxlength="100"
											 required="true" requiredMessage="O campo 'Nome' é de preenchimento obrigatório."  styleClass="form-control">												
								</p:inputText>
							</div>	
							
						</div>
						
						<div class="row">
							<div class="col-md-6 has-error">
		   						<div class="ui-fluid">
				   					<label for="numMatricula" class="control-label">Matrícula: </label>
									<p:inputText id="numMatricula" maxlength="10" size="20"
										value="#{alunoVisao.aluno.matricula}" styleClass="form-control"
										style="width:150px;">
									</p:inputText>
								</div>						
			   				</div>
			   				
			   				<div class="col-md-6 has-error">
			   						<div class="ui-fluid">
					   					<label for="numCPF" class="control-label">CPF: </label>
										<p:inputText id="cpf" value="#{alunoVisao.aluno.alunCPF}"
											onkeypress="Mascara(this,Cpf);" onkeydown="Mascara(this,Cpf);" onkeyup="Mascara(this,Cpf);" 
											maxlength="14" styleClass="inputTextDinamico" converter="#{cpfCnpjJsfConverter}">
											<p:ajax event="blur" process="@this" update="messages" styleClass="form-control"/>
										</p:inputText>
									</div>						
			   				</div>
						</div>
							
							<div class="col-md-3">	
								<label class="control-label" for="codigoInfControle03">Inf. Controle 03</label>
								<p:inputText id="codigoInfControle03" value="#{tipoFuncionalidadeAlcadaVisao.tipoFuncionalidadeAlcada.codigoInformacaoControle03}" maxlength="40"  styleClass="form-control"/>
							</div>	
							
							<div class="col-md-3">
								<label class="control-label" for="indIntOtrSist">Integração com Sistemas *</label>
								<div class="ui-fluid">
									<p:selectOneButton id="indIntOtrSist" value="#{tipoFuncionalidadeAlcadaVisao.tipoFuncionalidadeAlcada.integraOutroSistema}" required="true"
										requiredMessage="O campo 'Integração com Sistemas' é de preenchimento obrigatório.">
							            <f:selectItem itemLabel="Sim" itemValue="S" />
							            <f:selectItem itemLabel="Não" itemValue="N" />
							        </p:selectOneButton>
						        </div>
							</div>	
						</div>
						
						<div class="row">	
							<div class="col-md-12 has-error">	
								<label class="control-label" for="dscChaveOrigem">Descrição da Chave Origem *</label>
								<p:inputTextarea id="dscChaveOrigem" rows="5" counter="contador"
												 value="#{tipoFuncionalidadeAlcadaVisao.tipoFuncionalidadeAlcada.descricaoChaveOrigem}" maxlength="100"
												 required="true" counterTemplate="{0} caracteres disponíveis."
												 requiredMessage="O campo 'Descrição de Chave Origem' é de preenchimento obrigatório."  styleClass="form-control">															
								</p:inputTextarea>
								<h:outputText id="contador" />	
							</div>
								
						</div>	
												
					<f:facet name="footer">	
						<center>
							<p:commandButton value="Salvar" icon="fa fa-save" action="#{tipoFuncionalidadeAlcadaVisao.incluirTipoFuncionalidadeAlcada}" disabled="#{!tipoFuncionalidadeAlcadaVisao.possuiAcessoTotal}" process="@all" update=":form1"  title="Salvar Dados" styleClass="btn-success btn-sm"/>
							<p:spacer width="20" />
							<p:commandButton value="Limpar" icon="fa fa-eraser" action="#{tipoFuncionalidadeAlcadaVisao.limparDadosTela}" process="@this" update=":form1"  title="Limpar dados tela" styleClass="btn-primary btn-sm"/>
							<p:spacer width="20" />
							<p:commandButton value="Retornar" icon="fa fa-backward" action="#{alunoVisao.retornarTelaPrincipal}" title="Voltar para o menu principal" immediate="true" styleClass="btn-info btn-sm"/>
						</center>
					</f:facet>
							
				</p:panel>
						
				<br/>
				
				<p:panel header="Funcionalidades existentes no deferimento" styleClass="card">
						<p:dataTable  id="ltTipoFuncionalidadeAlcada" 
					             var="tipoFuncionalidadeAlcada"
					             emptyMessage="Não existem registros para Autorização" 
								 value="#{tipoFuncionalidadeAlcadaVisao.listaTipoFuncionalidadeAlcada}" 
								 widgetVar="dataTableTipoFuncionalidadeAlcada"
								 paginator="true" 
								 rows="10" 
								 paginatorPosition="top"
								 dynamic="true"
								 styleClass="table table-striped">
		 					     
								<p:column style="width:20%; text-align: center;"  sortBy="#{tipoFuncionalidadeAlcada.nome}" headerText="Nome">
									<h:outputText value="#{tipoFuncionalidadeAlcada.nome}" />
								</p:column>
								
								<p:column style="width:20%; text-align: center;"  sortBy="#{tipoFuncionalidadeAlcada.funcionalidade.nome}" headerText="Funcionalidade">
									<h:outputText value="#{tipoFuncionalidadeAlcada.funcionalidade.nome}"  />
								</p:column>
								
								<p:column style="text-align: center;"  sortBy="#{tipoFuncionalidadeAlcada.codigoInformacaoControle01}" headerText="Inf. Controle 1">
									<h:outputText value="#{tipoFuncionalidadeAlcada.codigoInformacaoControle01}" />
								</p:column>
								
								<p:column style="text-align: center;" sortBy="#{tipoFuncionalidadeAlcada.codigoInformacaoControle02}" headerText="Inf. Controle 2">
									<h:outputText value="#{tipoFuncionalidadeAlcada.codigoInformacaoControle02}" />
								</p:column>
								
								<p:column style="text-align: center;"  sortBy="#{tipoFuncionalidadeAlcada.codigoInformacaoControle03}" headerText="Inf. Controle 3">
									<h:outputText value="#{tipoFuncionalidadeAlcada.codigoInformacaoControle03}"  />
								</p:column>
								
								<p:column style="width:20%; text-align: center;"  sortBy="#{tipoFuncionalidadeAlcada.descricaoChaveOrigem}" headerText="Desc. Chave Origem">
									<h:outputText value="#{tipoFuncionalidadeAlcada.descricaoChaveOrigem}"  />
								</p:column>
																
								<p:column style="width:10%; text-align: center;" headerText="Ações">
									<!-- Botão Editar -->
									<p:commandButton icon="fa fa-edit" id="BtEditar" update=":form1" process="@this"  immediate="true" title="Editar Tipo Funcionalidade Alçada" disabled="#{!tipoFuncionalidadeAlcadaVisao.possuiAcessoTotal}" styleClass="btn-warning btn-xs">
										<f:setPropertyActionListener value="#{tipoFuncionalidadeAlcada}" target="#{tipoFuncionalidadeAlcadaVisao.tipoFuncionalidadeAlcada}" />
									</p:commandButton>
									
									<p:spacer width="2"/>
									
									<!-- Botão Excluir -->
									<p:commandButton icon="fa fa-trash" actionListener="#{tipoFuncionalidadeAlcadaVisao.removerTipoFuncionalidadeAlcada(tipoFuncionalidadeAlcada)}"  update="form1, messages"  process="@this"  immediate="true" title="Excluir Tipo Funcionalidade Alçada" disabled="#{!tipoFuncionalidadeAlcadaVisao.possuiAcessoTotal}" styleClass="btn-danger btn-xs">
										<p:confirm header="Confirmação de Exclusão" message="Confirma Exclusão de Tipo de Funcionalidade Alçada?" icon="ui-icon-alert" />
									</p:commandButton>
								
								</p:column>
								
						</p:dataTable>
					</p:panel>
			</p:outputPanel>
						
			<p:confirmDialog id="confirmaExclusao" global="true" showEffect="fade" hideEffect="fade" severity="alert"
				message="Confirma Exclusão de Tipo Funcionalidade de Alçada?" resizable="false" width="550" modal="true"
				header="Aviso" widgetVar="confirmaExclusao">
				<center>
					<p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes btn-success btn-sm" icon="fa fa-check" />
			    	<p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no btn-danger btn-sm" icon="fa fa-close"  />					
				</center>
			</p:confirmDialog>
				
		</h:form>

	</ui:define>

</ui:composition>